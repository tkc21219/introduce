"use strict";function Openning(){this.init()}function List(){this.init()}function Detail(){this.init()}function Gallery(){this.init()}function Common(){this.getParamater(),this.bindEvent()}Openning.prototype={init:function(){this.getParamater(),this.bindEvent()},getParamater:function(){this.$p1=$(".js-p1"),this.$p2=$(".js-p2"),this.$p3=$(".js-p3"),this.$pro=$(".js-openning-prologue"),this.$link=$(".js-openning-link")},bindEvent:function(){this.prologue(),setTimeout(this.firstShow.bind(this),2e3),setTimeout(this.secondShow.bind(this),4e3),setTimeout(this.hidePro.bind(this),7500)},prologue:function(){this.$pro.contents().each(function(){3===this.nodeType&&$(this).replaceWith($(this).text().replace(/(\S)/g,"<span>$1</span>"))})},firstShow:function(){this.$p1.css({opacity:1});for(var t=0;t<=this.$p1.children().length-1;t++)this.$p1.children("span:eq("+t+")").delay(100*t).fadeIn(300)},secondShow:function(){this.$p2.css({opacity:1});for(var t=0;t<=this.$p2.children().length-1;t++)this.$p2.children("span:eq("+t+")").delay(100*t).fadeIn(300)},hidePro:function(){this.$pro.fadeOut(1e3),this.showLink()},showLink:function(){this.$p3.css({display:"block"}).animate({opacity:1},1500),this.animeLink()},animeLink:function(){var t=this;setInterval(function(){t.$p3.animate({marginTop:"-5px"},700,"swing").animate({marginTop:"5px"},400,"swing")},800)}},List.prototype={init:function(){this.getParamater(),this.bindEvent()},getParamater:function(){this.$window=$(window),this.$eachList=$(".js-list li")},bindEvent:function(){var t=window.matchMedia("(max-width: 767px)").matches;t||(this.setSize(),this.$window.on("resize",this.setSize.bind(this)))},setSize:function(){var t=this.$window.height(),i=t/3;this.$eachList.css("height",i+"px"),this.showList()},showList:function(){for(var t=0;t<this.$eachList.length;t++)this.$eachList.delay(100).fadeIn(),this.$eachList.eq(t).animate({opacity:1,top:0},1e3)}},Detail.prototype={init:function(){this.getParamater(),this.bindEvent()},getParamater:function(){this.$window=$(window),this.$body=$("html, body"),this.$sidebarList=$(".js-list"),this.$sidebarListItem=this.$sidebarList.find("li"),this.$listlength=this.$sidebarListItem.length,this.$slideBtn=$(".js-slide-btn a"),this.$downBtn=$(".js-slide-btn .down"),this.$detailContent=$(".js-detail")},bindEvent:function(){this.getData(),this.setPositionDownBtn(),this.$window.on("resize",this.setPositionDownBtn.bind(this)),this.$slideBtn.on("click",this.slideSidebar.bind(this)),this.$window.on("hashchange",this.getData.bind(this))},setPositionDownBtn:function(){this.$height=this.$window.height(),this.$downHeight=this.$downBtn.outerHeight(),this.$downBtn.css({top:this.$height-this.$downHeight+"px"})},slideSidebar:function(t){t.preventDefault();var i=$(t.currentTarget),s=i.attr("class"),e=this.$sidebarList.offset().top-this.$window.scrollTop();if(this.$listItemHeight=this.$sidebarListItem.height(),"up"===s&&e<=0)Math.abs(e)>this.$listItemHeight?this.$sidebarList.stop().animate({top:"+="+this.$listItemHeight+"px"}):this.$sidebarList.stop().animate({top:"+="+Math.abs(e)+"px"});else{this.$listWholeHeight=this.$sidebarListItem.length*this.$listItemHeight;var n=Math.abs(e)+this.$height,a=this.$listWholeHeight-n;n<this.$listWholeHeight&&(a>this.$listItemHeight?this.$sidebarList.stop().animate({top:"-="+this.$listItemHeight+"px"}):this.$sidebarList.stop().animate({top:"-="+a+"px"}))}},matchSlide:function(){var t=this,i=window.location.hash,s=$(".is-active");s.removeClass("is-active");for(var e=0;e<this.$listlength;e++){var n=t.$sidebarListItem.eq(e).find("a").attr("href");i===n?(t.$sidebarListItem.eq(e).css({cssText:"-webkit-filter: grayscale(0);"}).addClass("is-active"),t.$sidebarListItem.eq(e).find(".js-list-en").hide(),t.$sidebarListItem.eq(e).find(".js-list-ja").show()):(t.$sidebarListItem.eq(e).css({cssText:"-webkit-filter: grayscale(100%);"}),t.$sidebarListItem.eq(e).find(".js-list-en").show(),t.$sidebarListItem.eq(e).find(".js-list-ja").hide())}},getData:function(){var t=this,i=window.location.hash.substr(1);$.ajax({url:"/introduce/myprofile/list/detail/data/"+i+".html",type:"GET",dataType:"HTML"}).done(function(i){t.$detailContent.empty().append(i),t.matchSlide(),t.$body.scrollTop(0)}).fail(function(t){console.log("cannot get html data...")})}},Gallery.prototype={init:function(){this.getParamater(),this.bindEvent()},getParamater:function(){this.$window=$(window),this.$body=$("body"),this.$galleryWrap=$(".p-gallery__wrapper"),this.$galleryImages=this.$galleryWrap.find("img"),this.$galleryImageLink=this.$galleryWrap.find("a"),this.$modalWrap=$(".p-modal"),this.$modalImage=$(".p-modal__image"),this.$modalBtn=$(".p-modal__btn"),this.$modalClose=$(".p-modal__close"),this.arrayOfImages=[],this.focusPicIndex=0},bindEvent:function(){this.randomPhotos(),this.showPhotos(),this.$galleryImageLink.on("click",this.showModal.bind(this)),this.$modalClose.on("click",this.closeModal.bind(this)),this.$modalBtn.on("click",this.slideModal.bind(this))},randomPhotos:function(){for(var t=this,i=this.$galleryImages.length,s=0,e=0;e<i;e++){var n=this.$galleryImages.eq(e).attr("src");this.arrayOfImages.push(n)}for(var a=i-1;a>0;a--){var h=Math.floor(Math.random()*(a+1)),o=this.arrayOfImages[a];this.arrayOfImages[a]=this.arrayOfImages[h],this.arrayOfImages[h]=o}this.$galleryImages.each(function(){t.$galleryImages.eq(s).attr({src:t.arrayOfImages[s]}),s++})},showPhotos:function(){this.$galleryImages.animate({opacity:1},1e3)},showModal:function(t){t.preventDefault();var i=$(t.currentTarget),s=i.find("img").attr("src");this.$body.addClass("modal-open"),this.$modalWrap.css({width:"100%",height:"100%"}).fadeIn(700),this.$modalImage.append('<img alt="" src="'+s+'">'),this.focusPicIndex=this.arrayOfImages.indexOf(s)},closeModal:function(t){t.preventDefault();var i=this,s=this.$window.scrollTop();this.$modalWrap.fadeOut(1e3,function(){i.$modalImage.empty()}),this.$body.removeClass("modal-open"),$("html, body").prop({scrollTop:s})},slideModal:function(t){t.preventDefault();var i=$(t.currentTarget),s=i.data("direction");"next"===s&&47!==this.focusPicIndex?this.focusPicIndex+=1:"prev"===s&&0!==this.focusPicIndex?this.focusPicIndex-=1:"next"===s&&47===this.focusPicIndex?this.focusPicIndex=0:"prev"===s&&0===this.focusPicIndex&&(this.focusPicIndex=47),this.$modalImage.empty().append('<img class="modal-img" src="'+this.arrayOfImages[this.focusPicIndex]+'">').hide().fadeIn()}},Common.prototype={getParamater:function(){this.$window=$(window),this.$header=$(".js-header"),this.$eachList=$(".js-list li")},bindEvent:function(){var t=window.matchMedia("(max-width: 767px)").matches;t||(this.setHeader(),this.$window.on("resize",this.setHeader.bind(this)),this.$eachList.hover(this.hoverAction.bind(this,!0),this.hoverAction.bind(this,!1)))},setHeader:function(){this.$width=this.$window.width(),this.$height=this.$window.height(),this.$header.css("height",this.$height+"px").fadeIn(700)},hoverAction:function(t,i){if(t){var s=$(i.currentTarget).not(".is-active");s.css("-webkit-filter","grayscale(0)"),s.find(".js-list-en").stop().fadeOut(600),s.find(".js-list-ja").stop().fadeIn(600)}else s=$(i.currentTarget).not(".is-active"),s.css("-webkit-filter","grayscale(100%)"),s.find(".js-list-en").stop().fadeIn(600),s.find(".js-list-ja").stop().fadeOut(600)}},$(function(){var t=window.location.href,i=window.location.hash,s=t.split("/");"detail"===s[6]&&""===i&&(window.location.href="#background");var e=!s.includes("list")&&!s.includes("gallery"),n=s.includes("list")&&!s.includes("detail"),a=s.includes("list")&&s.includes("detail"),h=s.includes("gallery");if(e){new Openning}else if(n){new List}else if(a){new Detail}else if(h){new Gallery}new Common});